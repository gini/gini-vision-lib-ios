<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Updating to 4.0  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Updating to 4.0  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
        <img class="logo-icon" src="img/logo.png"/>
    
        </a>
        
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/gini/gini-vision-lib-ios">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">GiniVision Reference</a>
      <img class="carat" src="img/carat.png" />
      Updating to 4.0  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="integration.html">Integration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="integration-in-a-xamarin-project.html">Integration in a Xamarin Project</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="changelog.html">Changelog</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="license.html">License</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="customization-guide.html">Customization guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="open-with-guide.html">Open with guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="import-pdfs-and-images-guide.html">Import PDFs and images guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="qr-code-scanning-guide.html">QR Code scanning guide</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Migration guides.html">Migration guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="updating-to-50.html">Updating to 5.0</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="updating-to-40.html">Updating to 4.0</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="updating-to-32.html">Updating to 3.2</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='updating-to-4-0' class='heading'>Updating to 4.0</h1>
<h2 id='what-39-s-new' class='heading'>What&rsquo;s new?</h2>

<hr>
<h3 id='multi-page-support' class='heading'>Multi-page support</h3>

<p>Documents with multiple pages are now supported, being possible to capture several pages to get the analysis results. To enable it (disabled by default) set the <code>GiniConfiguration.multipageEnabled</code> property to <code>true</code>.
Besides, when using the Component API, the <code>MultipageReviewViewController</code> component can be used to handle one or several documents (see the Example app for implementation details).</p>
<h3 id='networking-implementation' class='heading'>Networking implementation</h3>

<p>The Screen API now offers the option to include all the networking logic, only being necessary to provide a <code>GiniVisionResultsDelegate</code> when initializing the Screen API in order to get the analysis results.
If you want to migrate your Screen API implementation to this one, just remove your current implementation of the <code>GiniVisionDelegate</code> and implement the <code>GiniVisionResultsDelegate</code>. You need to add the <code>Networking</code> or <code>Networking+Pinning</code> subspec in your <code>Podfile</code> before, as pointed out in the <a href="integration.html">Integration guide</a>.</p>
<h3 id='custom-photos-gallery' class='heading'>Custom photos gallery</h3>

<p>A custom photos gallery picker has been designed, which unlike the native <code>UIImagePickerController</code> allows to select multiple photos at the same time, to start caching before showing it (no delays when showing the first time) and some additional customization. It is used within the <code>DocumentPickerCoordinator</code>.</p>
<h3 id='gini-ios-sdk-1-0' class='heading'>Gini iOS SDK 1.0</h3>

<p>In order to use the new Multi-page feature you have to update the <a href="https://github.com/gini/gini-sdk-ios">Gini iOS SDK</a> to version 1.0, which uses a different way of handling the document analysis, introducing <strong>Partial</strong> and <strong>Composite</strong> documents.</p>
<h2 id='breaking-changes' class='heading'>Breaking Changes</h2>

<hr>
<h4 id='bolts' class='heading'>Bolts</h4>

<p>In order to use the new Multi-page feature, you have to update the <a href="https://github.com/gini/gini-sdk-ios">Gini iOS SDK</a> to version 1.0 which uses the latest version of <em>Bolts</em> (1.9). This version introduces a lot of improvements and bug fixes, but also some breaking changes in the syntaxis.</p>

<ul>
<li><code>continue()</code> is now <code>continueWith(block:)</code></li>
<li><code>continue(successBlock:)</code> is now <code>continueOnSuccessWith(block:)</code></li>
<li>And now every <code>BFTask</code> has a specific type for the result, <code>BFTask&lt;ResultType&gt;</code>. i.e: <code>BFTask&lt;GINIDocument&gt;</code></li>
</ul>
<h3 id='screen-api-only' class='heading'>Screen API only</h3>
<h4 id='ginivisiondelegate' class='heading'>GiniVisionDelegate</h4>

<ul>
<li><code>GiniVisionDelegate.didCapture(_:)</code> and <code>GiniVisionDelegate.didCapture(document:)</code> are replaced by <code>GiniVisionDelegate.didCapture(document:networkDelegate:)</code>.</li>
<li><code>GiniVisionDelegate.didReview(_:withChanges:)</code> and <code>GiniVisionDelegate.didReview(document:withChanges:)</code> are replaced by <code>GiniVisionDelegate.didReview(documents:networkDelegate:)</code>.</li>
<li><code>GiniVisionDelegate.didCancelReview()</code> is replaced by <code>GiniVisionDelegate.didCancelReview(for:)</code>.</li>
<li><code>GiniVisionDelegate.didShowAnalysis(_:)</code> is not used anymore.</li>
</ul>
<h3 id='component-api-only' class='heading'>Component API only</h3>

<p>This version adds new screens and new features to old screens, adding also
more complexity to them. That is why now every screen of the Gini Vision Library has a <code>delegate</code> to handle every interaction from the outside, making the communication with it more extensible and clearer.</p>
<h4 id='camera-screen' class='heading'>Camera screen</h4>

<ul>
<li>To improve the navigation between screens, the file import pickers has been decoupled from the <code>CameraViewController</code> and they are now handled by a <code>DocumentPickerCoordinator</code>. From now on, you have to use the <code>CameraViewController.init(giniConfiguration:)</code> initializer and set the <code>CameraViewControllerDelegate</code> to get the selected picker in the <code>CameraViewControllerDelegate.camera(_:didSelect:)</code> method.</li>
<li>Now document validation should be handled outside of the <code>CameraViewController</code>.</li>
<li>To enable <em>Drag&amp;Drop</em>, just call the <code>DocumentPickerCoordinator.setupDragAndDrop(in:)</code> method, passing the view that will handle the drop interaction (we recommend to pass the <code>CameraViewController.view</code>).</li>
<li>With the addition of a custom image picker to support multiple selection, you can start caching the album images by calling the <code>DocumentPickerCoordinator.startCaching()</code> method when creating the coordinator, but only if the gallery access permission has been granted before (<code>DocumentPickerCoordinator.isGalleryPermissionGranted</code>).</li>
</ul>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://gini.net" target="_blank" rel="external">Gini GmbH</a>. All rights reserved. (Last updated: 2019-11-14)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.6</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
