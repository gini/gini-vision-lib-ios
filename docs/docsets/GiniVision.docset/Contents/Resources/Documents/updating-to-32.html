<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Updating to 3.2  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Updating to 3.2  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
        <img class="logo-icon" src="img/logo.png"/>
    
        </a>
        
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/gini/gini-vision-lib-ios">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">GiniVision Reference</a>
      <img class="carat" src="img/carat.png" />
      Updating to 3.2  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="integration.html">Integration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="integration-in-a-xamarin-project.html">Integration in a Xamarin Project</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="changelog.html">Changelog</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="license.html">License</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="customization-guide.html">Customization guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="open-with-guide.html">Open with guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="import-pdfs-and-images-guide.html">Import PDFs and images guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="qr-code-scanning-guide.html">QR Code scanning guide</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Migration guides.html">Migration guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="updating-to-50.html">Updating to 5.0</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="updating-to-40.html">Updating to 4.0</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="updating-to-32.html">Updating to 3.2</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='updating-to-3-2' class='heading'>Updating to 3.2</h1>

<p>GiniVision 3.2 introduces several new features and changes, empowering your app and improving the user experience.  </p>

<p>This guide is provided in order to ease the transition of existing applications using <em>GiniVision</em> with a version lower than 3.2.</p>
<h2 id='breaking-changes' class='heading'>Breaking Changes</h2>
<h3 id='camera-screen' class='heading'>Camera screen</h3>

<p>The UI of the Camera Screen has been updated for a better user experience. The document corner guides on the camera screen are now drawn programmatically, so you don&rsquo;t need to provide an overlay image for it anymore (<code>cameraOverlay</code> resource should be removed from assets). Now you only need to specify the color of the corner lines in the <code>GiniConfiguration.cameraPreviewCornerGuidesColor</code> property.</p>
<h2 id='deprecation' class='heading'>Deprecation</h2>

<ul>
<li><code>GiniVisionDelegate.didCapture(_:)</code> - use the new <code>GiniVisionDelegate.didCapture(document:)</code> delegate method instead.</li>
<li><code>GiniVisionDelegate.didReview(_:withChanges:)</code> - use the new <code>GiniVisionDelegate.didReview(document:withChanges:)</code> delegate method instead.</li>
<li><code>AnalysisViewController.init(_:)</code> - use the new <code>AnalysisViewController.init(document:)</code> initializer instead.</li>
<li><code>CameraViewController.init(success:failure:)</code> - use the new <code>CameraViewController.init(successBlock:failureBlock:)</code> initializer instead.</li>
<li><code>ReviewViewController.init(_:success:failure:)</code> - use the new <code>ReviewViewController.init(_:successBlock:failureBlock:)</code> initializer instead.</li>
</ul>
<h2 id='new-features' class='heading'>New features</h2>
<h3 id='document-import' class='heading'>Document Import</h3>

<p>The Document Import feature is located on the Camera Screen and allows users to select images (jpeg, png and gif) and PDFs of invoices from their device or from their cloud storage (<em>iCloud</em>, <em>Dropbox</em>&hellip;). The selected document will be made available to the client and may be optionally verified before accepting it for upload and analysis.
To implement this feature you can follow <a href="Import-pdfs-and-images-guide.html">Import PDFs and Images guide</a>.</p>
<h3 id='open-with' class='heading'>Open with</h3>

<p>With the <em>Open with</em> feature now is possible to open files from other apps like <em>Mail</em> or <em>Whatsapp</em>. More information about this and how to implement it can be found in the <a href="Open-with-guide.html">Open with guide</a></p>
<h3 id='new-camera-screen-ui' class='heading'>New Camera Screen UI</h3>

<p>The UI of the Camera Screen has been redesigned to offer a better user experience. Apart from the corner guides, described above, and the dimmed borders on the preview, a new button for Document import (that can be replaced adding the <code>documentImportButton</code> asset). All the properties of the hint (color, text or close button color) can be customized in the <code>GiniConfiguration</code> instance.</p>
<h3 id='new-analysis-screen-ui' class='heading'>New Analysis Screen UI</h3>

<p>The UI of the Anaysis Screen has also been redesigned, to accomodate opening PDFs and to provide additional information to the user. When a <em>PDF</em> is analysed, an information panel will appear on the top of the screen indicating <em>PDF</em> name and the number of pages. Both the background color and text color of the panel can be customized through the <code>GiniConfiguration.analysisPDFInformationTextColor</code> and <code>GiniConfiguration.analysisPDFInformationBackgroundColor</code> properties.</p>

<p>When analysing an image takes more than 5 seconds, the Gini Vision Library cycles through tips, showing each one for 4 seconds. The tips, which are shown on the bottom of the Screen, are intended to help our users achieve better results by offering them advice on how to take photos most suitable for analysis.</p>
<h3 id='help-screens' class='heading'>Help screens</h3>

<p>To aid users in discovering and learning about the features of the Gini Vision Library, and how to best use them, we added help screens. These can be viewed from the Camera Screen.</p>

<p>If using the <strong>Screen API</strong>, the top right button in the Camera Screen will now launch the HelpActivity instead of showing the Onboarding Screens. If using the <strong>Component API</strong>, you need to launch the <code>HelpMenuViewController</code> manually.</p>

<p>From the Help Screen the following screens can be reached:</p>

<ul>
<li><strong>Photo Tips Screen</strong>:</li>
</ul>

<p>Information to the user about how to take photos suitable for analysis. The images of this screen can be changed adding <code>captureSuggestion1</code>, <code>captureSuggestion2</code>, <code>captureSuggestion3</code> and <code>captureSuggestion4</code> assets into your project.</p>

<ul>
<li><strong>File Import Screen</strong>:</li>
</ul>

<p>A guide on how to import files from other apps via “open with”. Images can be changed adding <code>openWithTutorialStep1</code>, <code>openWithTutorialStep2</code> and <code>openWithTutorialStep3</code> assets into your project. Texts also can be changed adding <code>ginivision.help.openWithTutorial.step1.title</code>,
<code>ginivision.help.openWithTutorial.step1.subTitle</code>, <code>ginivision.help.openWithTutorial.step2.title</code>,
<code>ginivision.help.openWithTutorial.step2.subTitle</code>, <code>ginivision.help.openWithTutorial.step3.title</code> and
<code>ginivision.help.openWithTutorial.step3.subTitle</code> to your <code>X.strings</code> file.</p>

<ul>
<li><strong>Supported Formats Screen</strong>:</li>
</ul>

<p>Information about the document formats supported by the Gini Vision Library. Both supported and unsupported icon circle color can be changed in <code>GiniConfiguration.supportedFormatsIconColor</code> and <code>GiniConfiguration.nonSupportedFormatsIconColor</code> properties.</p>

<p>All these new assets can be found in the <a href="https://github.com/gini/gini-vision-lib-assets">Gini Vision Library UI Assets</a> repository.</p>
<h3 id='no-results-screen' class='heading'>No results screen</h3>

<p>The Gini Vision Library contains a new screen providing tips for users in order to achieve better results from images. This screen is displayed only for images (pictures taken by the camera and imported images).</p>

<p>The No Results Screen should be requested only when none of the required extractions were received.</p>

<p>When using the <strong>Screen API</strong>, once the analysis has been completed you can call the <code>AnalysisDelegate.tryDisplayNoResultsScreen()</code> as follows:</p>
<pre class="highlight swift"><code><span class="k">if</span> <span class="n">hasExtractions</span> <span class="p">{</span>
    <span class="c1">// Show the extractions</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">shown</span> <span class="o">=</span> <span class="n">analysisDelegate</span><span class="o">.</span><span class="nf">tryDisplayNoResultsScreen</span><span class="p">()</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">shown</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">customNoResultsScreen</span> <span class="o">=</span> <span class="kt">UIStoryboard</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Main"</span><span class="p">,</span> <span class="nv">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span><span class="o">.</span><span class="nf">instantiateViewController</span><span class="p">(</span><span class="nv">withIdentifier</span><span class="p">:</span> <span class="s">"noResultScreen"</span><span class="p">)</span> <span class="k">as!</span> <span class="kt">NoResultViewController</span>
        <span class="k">self</span><span class="o">.</span><span class="n">navigationController</span><span class="o">!.</span><span class="nf">pushViewController</span><span class="p">(</span><span class="n">customNoResultsScreen</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">self</span><span class="o">.</span><span class="n">analysisDelegate</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="p">}</span>
</code></pre>
<h3 id='custom-font' class='heading'>Custom font</h3>

<p>Now it is possible to specify a custom font for the whole library, being not needed to specify a font for each text.
You just need to specify the <code>GiniVisionFont</code> in the <code>GiniConfiguration.customFont</code> property. Previously defined fonts are no longer needed (<code>NavigationBarItemFont</code>, <code>NavigationBarTitleFont</code>, <code>NoticeFont</code>, <code>CameraNotAuthorizedTextFont</code>, <code>CameraNotAuthorizedButtonFont</code>, <code>OnboardingTextFont</code>,<code>ReviewTextTopFont</code> and <code>ReviewTextBottomFont</code>).</p>
<h3 id='ipad-support' class='heading'>iPad support</h3>

<p>On iPad, unlike the iPhone, the Gini Vision Library UI supports both landscape and portrait orientations, full rotation being enabled by default in both APIs (<em>Screen</em> and <em>Component</em>). So in case you don&rsquo;t want a particular orientation, you will need to disable it in your project settings (<em>Project Settings &rarr; General &rarr; Deployment Info &rarr; Device orientation</em>).</p>

<p>If you want to modify the images shown on both Onboarding screen and No Results screen, keep in mind that the device image (<code>onboardingPage1</code> and <code>captureSuggestion4</code> assets) is different for iPhone and iPads, so it will also be necessary to provide a version for iPad.</p>
<h4 id='extraction-quality-considerations' class='heading'>Extraction Quality Considerations</h4>

<p>We recommend implementing checks on tablet hardware to ensure that devices meet the Gini Vision Libraries minimum recommended hardware specifications.</p>

<p>Many iPads with at least 8MP cameras don’t have an LED flash (iPad Air 2 and iPad Mini 4 have 8MP camera but no flash). For this reason the extraction quality on those tablets might be lower compared to smartphones.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://gini.net" target="_blank" rel="external">Gini GmbH</a>. All rights reserved. (Last updated: 2019-11-14)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.6</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
